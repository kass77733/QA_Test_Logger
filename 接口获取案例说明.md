# 接口获取案例功能说明

## 功能概述
新增了"接口获取案例"功能，允许用户通过API接口获取测试用例，作为Excel导入的补充方式。

## 使用方法

### 1. 点击"接口获取案例"按钮
在测试执行页面，点击"导入Excel"旁边的"接口获取案例"按钮。

### 2. 填写参数
在弹出的对话框中填写以下三个参数：
- **项目编号**: 项目的唯一标识
- **子任务名称**: 子任务的名称
- **轮次**: 测试轮次

### 3. 提交请求
点击"确定"按钮后，系统会向 `http://127.0.0.1/testarGetCase` 发送GET请求。

## API接口规范

### 请求格式
- **URL**: `http://127.0.0.1/testarGetCase`
- **方法**: GET
- **参数**:
  - `projectId`: 项目编号
  - `subtaskName`: 子任务名称  
  - `round`: 轮次

### 响应格式
```json
{
  "status": 200,
  "data": [
    {
      "case_id": "1231dsd",
      "caseName": "案例名称",
      "test_steps": "测试步骤",
      "expected_result": "预期结果",
      "priority": "高"
    },
    {
      "case_id": "77dsd",
      "caseName": "案例名称77",
      "test_steps": "测试步骤77",
      "expected_result": "预期结果77",
      "priority": "低"
    }
  ]
}
```

## 数据处理流程

1. **参数验证**: 检查所有参数是否已填写
2. **发送请求**: 向指定API发送GET请求
3. **响应处理**: 解析JSON响应数据
4. **数据转换**: 将API数据转换为内部格式
5. **案例集命名**: 自动生成或用户自定义案例集名称
6. **数据库导入**: 与Excel导入使用相同的逻辑
7. **界面更新**: 更新测试用例列表和下拉框

## 测试方法

### 使用测试服务器
1. 以管理员权限运行测试服务器：
   ```bash
   python test_api_server.py
   ```

2. 在应用中测试接口获取功能

### 自定义API服务器
如需连接真实的API服务器，请确保：
- API服务器运行在 `127.0.0.1:80`
- 实现了 `/testarGetCase` 端点
- 返回符合规范的JSON数据

## 注意事项

- 确保网络连接正常
- API服务器必须返回正确的JSON格式
- 案例集名称默认为 `{项目编号}_{子任务名称}_{轮次}` 格式
- 支持与Excel导入相同的重复导入和案例集管理功能
- 请求超时时间为10秒